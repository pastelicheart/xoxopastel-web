<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign In - xoxo, pastel</title>
    <meta name="description" content="Sign in to your 'xoxo, pastel' account to access all features." />
    <link rel="canonical" href="https://www.xoxopastel.com/v1/signin" />
    <link rel="shortcut icon" type="image/png" href="../images/xoxo_logo.png" />
    <link rel="stylesheet" type="text/css" href="../css/index.css" />
    <link rel="stylesheet" type="text/css" href="../css/signin.css" />
  </head>
  <body>
    <div id="header"></div>
    <main>
      <div id="sign-in" class="form-container">
        <div class="form-description">
            <div style="padding-bottom: 45px;">
                <div id="descriptiveLogin">
                    <h1 style="margin-bottom: 0px !important;">Sign In</h1>
                    <h2 style="opacity: .9; color:beige;">Use your 'xoxo, pastel' account or Roblox Account</h2>
                </div>
                <div id="playerAccquired" class="hide-object">
                    <img id="robloxPlayerImg" src="https://tr.rbxcdn.com/30DAY-AvatarHeadshot-83BACEF2F33F1BC5B65C12AF8274F9ED-Png/150/150/AvatarHeadshot/Webp/noFilter">
                    <h1 id="robloxPlayerName">pastelicheart</h1>

                    <img id="verifiedBadge" src="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='28' height='28' viewBox='0 0 28 28' fill='none'%3E%3Cg clip-path='url(%23clip0_8_46)'%3E%3Crect x='5.88818' width='22.89' height='22.89' transform='rotate(15 5.88818 0)' fill='%230066FF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M20.543 8.7508L20.549 8.7568C21.15 9.3578 21.15 10.3318 20.549 10.9328L11.817 19.6648L7.45 15.2968C6.85 14.6958 6.85 13.7218 7.45 13.1218L7.457 13.1148C8.058 12.5138 9.031 12.5138 9.633 13.1148L11.817 15.2998L18.367 8.7508C18.968 8.1498 19.942 8.1498 20.543 8.7508Z' fill='white'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_8_46'%3E%3Crect width='28' height='28' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E">
                </div>
            </div>
            <div>
                <p class="signup-link">Don't have an account? <a class="signup-text" href="/v1/signup">Sign Up</a></p>
                <p class="signup-link hide-object">Don't have access anymore? <a class="signup-text" href="https://discord.gg/xoxopastel">Contact Enterprise</a></p>
            </div>
            
        </div>
        <div>
            <form id="form">
                <div class="form-group">
                  <label for="email">Email Address or Roblox Username</label>
                  <input type="text" id="email" name="email" aria-label="Roblox Username or email" required />
                </div>
                <div class="form-group hide-object">
                  <label for="password">Password</label>
                  <input type="password" id="password" name="password" aria-label="Password" required />
                </div>
                <div class="form-options hide-object">
                  <label>
                    <input type="checkbox" name="rememberMe" /> Remember Me
                  </label>
                  <a href="https://api.xoxopastel.com/v1/authentication/forgot-password" class="forgot-link">Forgot Password?</a>
                </div>
                <button type="submit" class="submit-btn hide-object">Sign In</button>
              </form>
        </div>
      </div>
    </main>
    <div id="footer"></div>
    <script>
      async function loadTemplate(file, elementId) {
        const response = await fetch(file);
        const content = await response.text();
        document.getElementById(elementId).innerHTML = content;
      }

      loadTemplate("../header.html", "header");
      loadTemplate("../footer.html", "footer");
    </script>
    <script>
      document.getElementById("form").addEventListener("submit", async (event) => {
          event.preventDefault(); 

          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;

          try {
              const response = await fetch("https://api.xoxopastel.com/v1/authentication/login", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({ email, password }),
              });

              const result = await response.json();

              if (response.ok) {
                  alert("Login successful!");
                  
                  window.location.href = "https://www.xoxopastel.com/";
              } else {
                  alert(`Login failed: ${result.message}`);
              }
          } catch (error) {
              console.error("Error logging in:", error);
              alert("An error occurred. Please try again.");
          }
      });
  </script>
  </body>
</html>

<!--<div class="alternate-sign-in">
          <p>Or sign in with:</p>
          <div class="social-buttons">
            <button class="google-signin">Google</button>
            <button class="roblox-signin">Roblox</button>
          </div>
        </div>-->